<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Snow Attic ‚Äì Secure File Vault</title>
<style>
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    background: #0a0f1a; /* Dark navy blue */
    color: #b3cde0; /* Soft light blue text */
    font-family: monospace, monospace;
}
body {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

.container {
    max-width: 700px;
    width: 100%;
}

.ascii {
    white-space: pre;
    text-align: center;
    margin-bottom: 20px;
    color: #8ab6d6;
}

.file {
    margin: 10px 0;
    border-bottom: 1px solid #1f2b3a;
    padding-bottom: 5px;
}

.dropzone {
    border: 2px dashed #3a6ea5;
    background-color: #111a2b;
    padding: 15px;
    text-align: center;
    margin: 20px 0;
    color: #b3cde0;
    cursor: pointer;
    user-select: none;
}

a {
    color: #77aadd;
    text-decoration: none;
}

a:hover,
a:focus {
    text-decoration: underline;
}

form {
    display: inline;
}

input[type="file"],
input[type="submit"] {
    background: #1a2636;
    color: #cde;
    border: 1px solid #3a6ea5;
    padding: 5px;
    margin-top: 5px;
}

input[type="submit"]:hover,
input[type="submit"]:focus {
    background: #2b3e55;
    cursor: pointer;
    outline: none;
}
</style>
</head>
<body>
<div class="container">

<div class="ascii" aria-hidden="true">
   _____                                   _   _   _      
  / ____|                             /\  | | | | (_)     
 | (___  _ __   _____      __        /  \ | |_| |_ _  ___ 
  \___ \| '_ \ / _ \ \ /\ / /       / /\ \| __| __| |/ __|
  ____) | | | | (_) \ V  V /   _   / ____ \ |_| |_| | (__ 
 |_____/|_| |_|\___/ \_/\_/   (_) /_/    \_\__|\__|_|\___|
</div>

<h1>welcome to snow.attic ‚ùÑÔ∏è</h1>

<!-- Upload Form -->
<form id="upload-form" action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data" aria-label="Upload file form">
    {% if csrf_token %}
        {{ csrf_token() }}
    {% endif %}
    <input type="file" name="file" id="file-input" accept=".txt,.pdf,.png,.jpg,.jpeg,.gif,.zip,.7z,.rar,.mp3,.wav,.mp4,.mpv,.gba" />
    <input type="submit" value="Upload" />
</form>

<!-- Drag and Drop -->
<div class="dropzone" id="dropzone" role="button" tabindex="0" aria-label="Drag and drop files here to upload">
    Drag &amp; drop files here to upload
</div>

<section aria-label="Uploaded files">
<h2>üìÇ Files ({{ files|length if files else 0 }}):</h2>
{% if files %}
    {% for file in files %}
    <div class="file">
        <a href="{{ url_for('download', filename=file) }}" tabindex="0">{{ file }}</a>
        <form action="{{ url_for('delete', filename=file) }}" method="POST" style="display:inline;">
            {% if csrf_token %}
                {{ csrf_token() }}
            {% endif %}
            <input type="submit" value="Delete" />
        </form>
    </div>
    {% endfor %}
{% else %}
    <p>No files uploaded yet.</p>
{% endif %}
</section>

</div>

<script>
// Drag-and-drop logic
const dropzone = document.getElementById('dropzone');
const fileInput = document.getElementById('file-input');
const uploadForm = document.getElementById('upload-form');

dropzone.addEventListener('dragover', e => {
    e.preventDefault();
    dropzone.style.background = '#1a2636';
});

dropzone.addEventListener('dragleave', e => {
    e.preventDefault();
    dropzone.style.background = '#111a2b';
});

dropzone.addEventListener('drop', e => {
    e.preventDefault();
    dropzone.style.background = '#111a2b';

    // Assign dropped files to file input
    if (e.dataTransfer.files.length > 0) {
        fileInput.files = e.dataTransfer.files;
        uploadForm.submit();
    }
});

// Optional: keyboard accessibility for dropzone (trigger file input)
dropzone.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        fileInput.click();
    }
});

// Show uploading feedback
uploadForm.addEventListener('submit', () => {
    dropzone.innerText = "Uploading...";
    dropzone.style.background = "#2b3e55";
});
</script>

</body>
</html>
